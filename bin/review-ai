#!/bin/sh

# AI-powered git diff review script
# Usage: review-ai [custom_prompt]
# Reviews current git changes using Claude AI

# Check if we're in a git repository
if ! git rev-parse --git-dir > /dev/null 2>&1; then
   echo "Error: Not in a git repository" >&2
   exit 1
fi

# Check if claude command is available
if ! command -v claude > /dev/null 2>&1; then
   echo "Error: 'claude' command not found" >&2
   exit 1
fi

# Use custom prompt if provided, otherwise use default
PROMPT="${1:-git diff から現在の編集内容を確認し、レビューしてください}"

claude -p "$PROMPT"

